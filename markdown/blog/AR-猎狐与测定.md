#!title:    猎狐·测定
#!date:     

#!content

![2024年5月3日，成都五五节活动期间，在成都外国语学院校园内体验猎狐](./image/G3/field/ardf-202405.jpg)

# 通信对抗：侦察监测

# 通信对抗：测向定位

## 比幅法测向

2022-05-23：昨天用网分作为信号源，定向天线加手持频谱仪作为测向机，尝试了通过无线电测向在一大堆小电驴中定位自己的小电驴的方法。这是我大一的时候就设想过的事情。（用蓝牙信标作为信号源不太可行，因为蓝牙发射的不是连续波，用来测向属于是自找麻烦。）结论就是无线电测向这件事情貌似真的很不简单，尤其是在居民小区这种环境复杂的地带。并且测向的难易程度也跟频率（也即波长）有关。波长长，则衍射效应显著，距离分辨率也降低。电波在复杂环境中因多径效应导致的复杂的场强分布，也给测向带来了很大的挑战。

## 多普勒测向

2022年3月上旬

首先从模拟（连续）的视角来看：假设以500Hz的频率旋转单根天线，接收CW信号，则由于多普勒效应，该CW会被调频，边带上出现500Hz的频率成分。对其作FM解调，可以得到频偏信号。这个频偏信号的频率等于旋转频率，其相位与天线旋转的相位差，即为未标定的DoA。

现采用伪多普勒方法：设置4根相同天线，以2kHz的频率依次选通，这等效于：以2kHz的采样率，对以500Hz旋转的单根天线的输出电平进行采样。而EB200电平表是对10.7Hz的中频信号采样。根据采样定理，2KHz的采样率去采10.7MHz的信号，必然发生混叠。但是由于FM信号（有用）带宽仅1kHz，FM信号本身并不会混叠，这就是所谓的欠采样。因此只需要对以2kHz采集到的dBμV电平序列进行LPF，再做FM解调，即可得到周期性频偏信号。

验证EB200电平采样最高速率：EB200电平采样是直接采集IF，与解调无关。方案：馈送带限调幅/调频波，以最大速率采集其电平，看频谱。测向场景必须关闭AGC（切换成MGC）。

如何解调：解调的目的是为了获得调制信号的相位（即DoA与旋转天线初相之间的关系）。直接对采集到的序列进行FFT（可实时），观察500Hz对应的fft-bin上的相位？注意：频偏信号的幅度（最大频偏）可能非常小，以至于检测不到。A = ra/λ=r(m)Fr(Hz)Fc(MHz)/48，来波频率越高、旋转速率越快、基线越长，最大频偏越大。例如：等效转速500Hz，孔径0.5m，波长0.7m，则最大频偏约为2kHz量级。

- [Wiki: Doppler radio direction finding](https://en.wikipedia.org/wiki/Doppler_radio_direction_finding)

![2023-10-20，伪多普勒方法实现FM调制的试验。用Arduino控制射频开关，以约7ms的等效旋转周期快速切换4个天线，用正弦连续波信号测试，可以看到频谱上出现了约142Hz的调频边带，这就证实了伪多普勒方法确实可以获得调频信号。](./image/G3/radar/pseudo-doppler-test.jpg)

## 单通道相关干涉仪测向

![ ](./image/G3/sigint/correlative-interferometer.png)

<script type="text/tg">
Ant0 *----------------------------------+     EB200
         +-+                            v    +-----+
Ant1 *---|  \            PE44820        o--->| Rx  |
         |   \      +--------------+    ^    +-----+
Ant2 *---|    \     |     Phase    |    |       ^
         | Mux +--->|    Shifter   |----+       |
Ant3 *---|    /     | 0,90,180,270 |            |
         |   /      +--------------+            |
Ant4 *---|  /               ^               UART|
         +-+                |                   |
          ^            8bits|                   |
     3bits|                 |                   v
      +---+-----------------+-------------------+---+
      |                 Controller                  |
      +---------------------------------------------+
</script>

- 分时输出4×4特征矩阵。精确相移不重要，重要的是有一定的正交性。
- 特征矩阵的每个元素都是dBμV，需要归一化。
- 天线阵元排列在正五边形顶点。
- 每隔一定时间获取一次特征矩阵，将其以热力图形式绘制出来。
- 基于开场测试数据，运用XGBoost作回归分析。

关于测向的另一条技术路线——单通道相关干涉仪——最大的问题在于移相器。移相器是非常昂贵的器件，现在能够轻易买到的数字移相器芯片——PE44820——所支持的频段位于1.7GHz~2.2GHz之间，跟业余频段和大多数感兴趣的频段并无交集，它在业余段上的特性是未知的。因此，只能将整个干涉仪系统看作黑盒，但又不是完全的黑盒。具体来说，仍然采用单通道相关干涉仪的方法，以分时方式采集一组射频电平，作为输入特征。然后，通过多层感知机模型，预测出一个离散的到达方位（视为多分类问题）或者连续的到达角（视为回归问题）。神经网络是相对简单的，而困难在于训练数据。采集数据必须要到外面的开放场地去，同时也要收集一些在家里阳台这样的环境下测向的数据。

- 石荣. 干涉仪侧向原理、方法与应用[M]. 电子工业出版社, 2023.
- R&S. [New digital direction finder for 0.5 MHz to 3000 MHz](https://www.rohde-schwarz.com/file/n174_ddf195.pdf)[J]. News from Rohde&Schwarz, Number 174 (2002/II)
- 苟晓鸣 等. [单通道相关干涉仪测向系统的快速实现](https://www.hanspub.org/journal/PaperInformation.aspx?paperID=23940&btwaf=26513060)[J]. 无线通信, 2018, 8(1): 37-44.
- 王灵威 等. 单通道干涉仪测向系统中的高精度数字移相技术研究. 应用科技, 2019, 46(6): 6-9. DOI: 10.11991/yykj.201903012.


# 雷达

![某款毫米波雷达的射频模块，图片出处不详](./image/G3/radar/mmw-radar.jpg)

## 2022-03-11

昨天测试的穿墙雷达，原则上是可以感知到墙体背后运动人体的存在，但无法获得更多的信息。人在墙后走动，会引起接收信号电平的微弱摆动，摆幅不到1个dBm。

可以这样理解：用手电筒从前面照射铝箔纸，铝箔纸后面有个东西在动。在铝箔纸前面，隐约可以看到铝箔纸背面有影子在动，但仅此而已。

目前的想法是，先从多天线和MIMO开始研究，做好知识准备。雷达不是个随便就能搞定的东西。

## 参考资料

- https://en.wikipedia.org/wiki/Continuous-wave_radar
- [radartutorial.eu](https://www.radartutorial.eu/index.en.html)
- [PyRAPID](http://radar.alizadeh.ca/)
- [Third version of homemade 6 GHz FMCW radar](https://hforsten.com/third-version-of-homemade-6-ghz-fmcw-radar.html)
- [Broadband terahertz time-domain spectroscopy and fast FMCW imaging: Principle and applications](http://cpb.iphy.ac.cn/article/2020/2034/cpb_29_7_078705.html)

# 射电天文
